<div xmlns="http://www.w3.org/1999/xhtml" lang="en"
     xmlns:f="http://typo3.org/ns/TYPO3/Fluid/ViewHelpers"
     xmlns:flux="http://typo3.org/ns/FluidTYPO3/Flux/ViewHelpers"
     xmlns:v="http://typo3.org/ns/FluidTYPO3/Vhs/ViewHelpers">

    <f:layout name="Content"/>

    <f:section name="Configuration">
        <flux:form id="userStatusView" options="{group: 'Common'}" label="User Status (View)" 
        description="Lista user status">

        </flux:form>
    </f:section>

    <f:section name="Preview">
        <strong>USER STATUS VIEW</strong><br/>

    </f:section>

    <f:section name="Main">
        
    <div id="user-status-view">
        <!-- caricato async -->
        <!-- stato default iniziale della vista "ajax" -->
        <f:render partial="UserStatus" arguments="{_all}" />
    </div>

    <script type="text/javascript">
        
        $(document).ready(function (){

            //alert('ppppppppppppp');

            $("#toggle-status-button").click(function (){

                $.post('/rest/user/status/toggle', function (response){

                    //if (response.status = "ok") {
                        $.get('/rest/content/user/status', function (response){

                        $("#user-status-view").html(response.message);
                        });
                    //}
                });
            })
        });  
    </script>
    </f:section>
</div>
