{namespace csn=Wind\Csnd\ViewHelpers}
<div class="user-post-card">
    <div class="panel panel-default">
        <div class="panel-heading">
            <div class="user-info">
                <img src="{post.user.avatar}" class="avatar img-circle"/>
                <span class="user-name">{post.user.nome} {post.user.cognome}</span>
            </div>
        </div>
        <div class="panel-body">
            <div class="post-info">
                <div class="text">
                    {post.text}
                </div>
            </div>
        </div>
        <div class="panel-footer clearfix">
            <div class="likes-text">
                <f:if condition="{post.likes -> f:count()}>0">
                    <f:then>
                        Piace a
                        <span class="likes-count badge">{post.likes -> f:count()}</span>
                        dipendenti
                    </f:then>
                    <f:else>
                        Ancora nessun like
                    </f:else>
                </f:if>
            </div>
            <f:link.action arguments="{postUid: '{post.uid}'}" controller="Post" extensionName="csnd"
                           pluginName="postplugin" action="like"
                           class="btn btn-primary pull-right">
                <csn:likeButtonText post="{post}" then="Non mi piace piÃ¹" else="Mi piace"/>
            </f:link.action>
            <hr>
            <label>Scrivi un commento:</label>
            <f:form extensionName="csnd"
                    pluginName="postplugin"
                    controller="Comment"
                    action="create"
                    enctype="multipart/form-data"
                    name="newComment"
                    object="{newComment}"
                    arguments="{postUid: post.uid}"
            >

                <f:form.textarea class="form-control" property="text"
                                 rows="3"/>
                <br>
                <f:form.submit value="Commenta" class="btn btn-primary pull-right"/>
            </f:form>
            <hr>
            <label>Commenti presenti:</label>
            <f:for each="{post.comments}" as="comment">
                <f:render partial="UserListItem" arguments="{user: '{comment.user}',comment: comment}"></f:render>
                <br/>
            </f:for>

        </div>
    </div>
</div>