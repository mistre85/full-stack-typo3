{namespace csn=Wind\Csnd\ViewHelpers}

<div class="panel panel-default panelsize">
    <div class="panel-heading">    
        <div class="icon">  
            <!-- <img src="{item.user.avatar}" class="img-circle resize" /> -->
            <img src="https://picsum.photos/150" class="img-circle resize" /> 
            
        </div>
        <div class="title">
            {item.user.nome} {item.cognome}
        </div>
    </div>
    <div class="panel-body">
        <div class="description">
            {item.text}
        </div>
    </div>
    <div class="panel-footer ">
      
         <f:if condition="{item.likes -> f:count()}>0">
            <f:then>
                Piace a
                <span class="like-count badge">{item.likes -> f:count()}</span>
                dipendenti
            </f:then>
            <f:else>
                Ancora Nessun Like
            </f:else>
        </f:if>
      
       <f:comment>arguments="{postUid: '{item.uid}'}"  ..> per definire una variabile di tipo stringa</f:comment> 
       <f:link.action  
                extensionName="csnd"
                pluginName="postplugin"
                controller="Post"
                action="like" 
                arguments="{postUid: '{item.uid}'}"               
                class="btn btn-primary pull-right">
        
        <f:comment>
            guida per l'esercizio: trasformare in ViewHelpers
           
             {item.likeButtonLabel}
        </f:comment>
                <csn:likeButtonText post="{item}" then="Non mi piace piÃ¹" else="Mi piace" />
               
        </f:link.action>
       
        <hr>
       
        <!-- 
            <f:form 
                extensionName="csnd"
                pluginName="postplugin"
                controller="Comment"
                action="create"
                enctype="multipart/form-data"
                name="newComment"
                object="{newComment}"
                arguments="{postUid: item.uid}"
                >        
                
                <label>Scrivi un commento:</label>
                <f:form.textarea class="form-control" rows="3" property="text" placeholder="scrivi il tuo commento" />
                <br>
                <f:form.submit value="Commenta" class="btn btn-primary pull-right" />

            </f:form>
        -->
        <f:form 
                class="comment-form"
                extensionName="csnd"
                pluginName="postplugin"
                controller="Comment"
                action="create"
                enctype="multipart/form-data"
                name="newComment"
                object="{newComment}"
                arguments="{postUid: item.uid}" 
                additionalAttributes="{data-postuid: item.uid}"
                >        
                
                <label>Scrivi un commento:</label>
                <f:form.textarea class="form-control post-text" rows="3" property="text" 
                    placeholder="scrivi il tuo commento" />
                <br>
                <f:form.submit value="Commenta" class="btn btn-primary pull-right" />

            </f:form>

        
        <!--
        <form id="newCommentAjax" enctype="multipart/form-data">
            <label>Scrivi un commento:</label>
            <input type="hidden"  name="postUid" value="{item.uid}" />
            <textarea name="commentoUtente" class="form-control" rows="3" placeholder="scrivi il tuo commento"></textarea>
            <button type="submit" class="btn btn-primary pull-right">CommentaAjaxCall</button>
        </form>
        -->
        <hr>
        
        <label>Commenti degli utenti:</label>
        <ul class="list-group comments-list">       
        <f:for each="{item.comments}" as="comment">
            
            <f:render partial="UserListItem" arguments="{user: '{comment.user}', comment: comment}"></f:render>
            
        </f:for>
         </ul>
    </div>
</div>

            

